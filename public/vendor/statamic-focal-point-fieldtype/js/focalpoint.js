(()=>{"use strict";var t={644:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(645),s=n.n(i)()((function(t){return t[1]}));s.push([t.id,".gap-1[data-v-e8f793d6]{gap:.25rem}.coordinates-simple[data-v-e8f793d6]{display:none}.coordinates[data-v-e8f793d6]{display:flex}.focal-point-fieldtype.narrow-level-2 .coordinates[data-v-e8f793d6]{display:none}.focal-point-fieldtype.narrow-level-2 .coordinates-simple[data-v-e8f793d6]{display:inline}.focal-point-fieldtype.narrow-level-1 svg[data-v-e8f793d6]{display:none}",""]);const a=s},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var s={};if(i)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(s[o]=!0)}for(var r=0;r<t.length;r++){var c=[].concat(t[r]);i&&s[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},379:(t,e,n)=>{var i,s=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function r(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},i=[],s=0;s<t.length;s++){var a=t[s],c=e.base?a[0]+e.base:a[0],l=n[c]||0,d="".concat(c," ").concat(l);n[c]=l+1;var f=r(d),u={css:a[1],media:a[2],sourceMap:a[3]};-1!==f?(o[f].references++,o[f].updater(u)):o.push({identifier:d,updater:v(u,e),references:1}),i.push(d)}return i}function l(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var s=n.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var o=a(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var d,f=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function u(t,e,n,i){var s=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=f(e,s);else{var a=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function h(t,e,n){var i=n.css,s=n.media,a=n.sourceMap;if(s?t.setAttribute("media",s):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var m=null,p=0;function v(t,e){var n,i,s;if(e.singleton){var a=p++;n=m||(m=l(e)),i=u.bind(null,n,a,!1),s=u.bind(null,n,a,!0)}else n=l(e),i=h.bind(null,n,e),s=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else s()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=s());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var s=r(n[i]);o[s].references--}for(var a=c(t,e),l=0;l<n.length;l++){var d=r(n[l]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}n=a}}}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var a=e[i]={id:i,exports:{}};return t[i](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{function t(t,e,n,i,s,a,o,r){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):s&&(c=r?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:l}}var e=t({props:["x","y","z","imageUrl","imageDimensions"],data:function(){return{frameDimensions:{w:100,h:100}}},mounted:function(){var t=this.$refs.frame;this.frameDimensions={w:t.clientWidth,h:t.clientHeight}},computed:{bgImageDimensions:function(){var t=function(t){return t.w/t.h};return t(this.imageDimensions)>t(this.frameDimensions)?{h:this.frameDimensions.h,w:this.frameDimensions.h/this.imageDimensions.h*this.imageDimensions.w}:{w:this.frameDimensions.w,h:this.frameDimensions.w/this.imageDimensions.w*this.imageDimensions.h}},frameWidthPercent:function(){return this.frameDimensions.w/this.bgImageDimensions.w*100},frameHeightPercent:function(){return this.frameDimensions.h/this.bgImageDimensions.h*100},relOffsetLeft:function(){var t=this.x-this.frameWidthPercent/2;return t=Math.max(t,0),Math.min(t,100-this.frameWidthPercent)},offsetLeft:function(){return this.relOffsetLeft*this.bgImageDimensions.w/100},relOffsetTop:function(){var t=this.y-this.frameHeightPercent/2;return t=Math.max(t,0),Math.min(t,100-this.frameHeightPercent)},offsetTop:function(){return this.relOffsetTop*this.bgImageDimensions.h/100},backgroundPosition:function(){return"-".concat(this.offsetLeft,"px -").concat(this.offsetTop,"px")},transformOrigin:function(){var t={x:(this.x-this.relOffsetLeft)/this.frameWidthPercent*100,y:(this.y-this.relOffsetTop)/this.frameHeightPercent*100};return"".concat(t.x,"% ").concat(t.y,"%")}}},(function(){var t=this;return(0,t._self._c)("div",{ref:"frame",staticClass:"frame-image",style:{backgroundImage:"url('".concat(encodeURI(t.imageUrl),"')"),backgroundPosition:t.backgroundPosition,transform:"scale(".concat(t.z,")"),transformOrigin:t.transformOrigin}})}),[],!1,null,null,null);const i={components:{FocalPointEditor:t({components:{FocalPointPreviewFrame:e.exports},props:["data","image"],data:function(){return{x:50,y:50,z:1,imageDimensions:null}},mounted:function(){var t=(this.data||"50-50-1").split("-");this.x=t[0],this.y=t[1],this.z=t[2]||1},computed:{reticleSize:function(){return this.imageDimensions&&this.z?Math.min(this.imageDimensions.w,this.imageDimensions.h)/this.z:0}},methods:{setImageDimensions:function(){var t=this.$refs.image;this.imageDimensions={w:t.clientWidth,h:t.clientHeight}},define:function(t){var e=t.target.getBoundingClientRect(),n=e.width,i=e.height,s=t.clientX-e.left,a=t.clientY-e.top;this.x=(s/n*100).toFixed(),this.y=(a/i*100).toFixed()},select:function(){this.$emit("selected",this.x+"-"+this.y+"-"+this.z),this.close()},close:function(){this.$emit("closed")},reset:function(){this.x=50,this.y=50,this.z=1}}},(function(){var t=this,e=t._self._c;return e("portal",{attrs:{name:"focal-point"}},[e("div",{staticClass:"focal-point"},[e("div",{staticClass:"focal-point-toolbox card p-0"},[e("div",{staticClass:"p-4"},[e("label",[t._v(t._s(t.__("Focal Point")))]),t._v(" "),e("small",{staticClass:"help-block"},[t._v(t._s(t.__("messages.focal_point_instructions")))]),t._v(" "),e("div",{staticClass:"focal-point-image"},[e("img",{ref:"image",attrs:{src:t.image},on:{click:t.define,load:t.setImageDimensions}}),t._v(" "),e("div",{staticClass:"focal-point-reticle",class:{zoomed:t.z>1},style:{top:"".concat(t.y,"%"),left:"".concat(t.x,"%"),width:"".concat(t.reticleSize,"px"),height:"".concat(t.reticleSize,"px"),marginTop:"-".concat(t.reticleSize/2,"px"),marginLeft:"-".concat(t.reticleSize/2,"px")}})])]),t._v(" "),e("div",{staticClass:"flex items-center text-sm justify-center mb-4"},[e("div",{staticClass:"flex items-center mx-4"},[e("div",{staticClass:"mr-1"},[t._v("X")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.x)),e("sup",[t._v("%")])])]),t._v(" "),e("div",{staticClass:"flex items-center mx-4"},[e("div",{staticClass:"mr-1"},[t._v("Y")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.y)),e("sup",[t._v("%")])])]),t._v(" "),e("div",{staticClass:"flex items-center mx-4"},[e("div",{staticClass:"mr-1"},[t._v("Z")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.z))])])]),t._v(" "),e("div",{staticClass:"px-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.z,expression:"z"}],staticClass:"w-full mb-4",attrs:{type:"range",min:"1",max:"10",step:"0.1"},domProps:{value:t.z},on:{__r:function(e){t.z=e.target.value}}}),t._v(" "),e("div",{staticClass:"mb-2 flex flex-wrap items-center justify-center"},[e("button",{staticClass:"btn mb-2",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.close.apply(null,arguments)}}},[t._v(t._s(t.__("Cancel")))]),t._v(" "),e("button",{staticClass:"btn mb-2 btn-default mx-2",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}},[t._v(t._s(t.__("Reset")))]),t._v(" "),e("button",{staticClass:"btn mb-2 btn-primary",attrs:{type:"button"},on:{click:t.select}},[t._v(t._s(t.__("Finish")))])])]),t._v(" "),e("h6",{staticClass:"p-4 text-center bg-gray-300 rounded-b"},[t._v(t._s(t.__("messages.focal_point_previews_are_examples")))])]),t._v(" "),t._l(9,(function(n){return e("div",{key:n,class:"frame frame-".concat(n)},[t.imageDimensions?e("focal-point-preview-frame",{attrs:{x:t.x,y:t.y,z:t.z,"image-url":t.image,"image-dimensions":t.imageDimensions}}):t._e()],1)}))],2)])}),[],!1,null,null,null).exports},mixins:[Fieldtype],inject:["storeName"],data:function(){return{showFocalPointEditor:!1,error:null,containerWidth:null}},computed:{coordinates:function(){if(!this.value)return null;if(this.value instanceof Array&&0===this.value.length)return null;var t=this.value.split("-");return{x:t[0],y:t[1],z:t[2]}},coordinatesString:function(){return this.coordinates?"".concat(this.coordinates.x,"-").concat(this.coordinates.y,"-").concat(this.coordinates.z):""},targetAssetFieldHandle:function(){return this.config.assets_field_handle},assetImageUrl:function(){try{return this.meta[this.targetAssetFieldHandle].data[0].url}catch(t){return null}},isEditingDisabled:function(){return!1!==this.error},showFocalPointEditor:function(){return this.showFocalPointEditor&&!1===this.error&&this.assetImageUrl},meta:function(){if(!this.namePrefix)return this.$store.state.publish[this.storeName].meta;for(var t,e=this.$parent,n=0;n<1e3;){if(e&&e.meta&&e.meta[this.targetAssetFieldHandle]){t=e.meta;break}if(void 0===e.$parent)break;e=e.$parent,n++}return void 0===t?null:t}},watch:{assetImageUrl:function(){this.reset(),this.updateErrors()}},mounted:function(){this.updateErrors()},methods:{openFocalPointEditor:function(){this.showFocalPointEditor=!0},closeFocalPointEditor:function(){this.showFocalPointEditor=!1},selectFocalPoint:function(t){this.update(t)},reset:function(){this.update(null)},updateErrors:function(){this.error=this.findErrors()},findErrors:function(){if(!this.config.assets_field_handle)return __("No asset field handle has been set in the field options");if(null===this.meta||!this.meta.hasOwnProperty(this.targetAssetFieldHandle))return __("Linked asset field was not found");var t=this.meta[this.targetAssetFieldHandle];return t.hasOwnProperty("data")?t.data.length>1?__("Focal focus fieldtype only supports a single asset"):1!==t.data.length&&__("No asset has been set"):__("No asset field meta data is available")}}};var s=n(379),a=n.n(s),o=n(644),r={insert:"head",singleton:!1};a()(o.Z,r);o.Z.locals;const c=t(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"focal-point-fieldtype",class:{"narrow-level-1":t.containerWidth<220,"narrow-level-2":t.containerWidth<170}},[e("element-container",{on:{resized:function(e){t.containerWidth=e.width}}},[e("div",[e("button",{staticClass:"btn w-full flex flex-row items-center justify-center text-center gap-1",attrs:{type:"button",disabled:t.isEditingDisabled},on:{click:t.openFocalPointEditor}},[e("svg-icon",{staticClass:"pin-icon flex-shrink-0 w-4 h-4",attrs:{name:"pin"}}),t._v(" "),t.error?e("span",{staticClass:"error overflow-hidden truncate",attrs:{title:t.error},domProps:{textContent:t._s(t.error)}}):t.coordinates?e("span",{staticClass:"coordinates flex-row gap-1"},[e("span",[t._v(t._s(t.__("X"))+": "+t._s(t.coordinates.x)+"%")]),t._v(" "),e("span",[t._v(t._s(t.__("Y"))+": "+t._s(t.coordinates.y)+"%")]),t._v(" "),e("span",[t._v(t._s(t.__("Z"))+": "+t._s(t.coordinates.z))])]):e("span",{staticClass:"call-to-action"},[t._v(t._s(t.__("Set Focal Point")))]),t._v(" "),t.coordinates?e("span",{staticClass:"coordinates-simple",domProps:{textContent:t._s(t.coordinatesString)}}):t._e()],1)])]),t._v(" "),t.showFocalPointEditor?e("FocalPointEditor",{attrs:{data:t.coordinatesString,image:t.assetImageUrl},on:{selected:t.selectFocalPoint,closed:t.closeFocalPointEditor}}):t._e()],1)}),[],!1,null,"e8f793d6",null).exports;Statamic.booting((function(){Statamic.$components.register("focalpoint-fieldtype",c)}))})()})();