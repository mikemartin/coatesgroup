{{#
    @name Product Features
    @desc The Product Features page builder block.
    @set page.page_builder.product_features
#}}

<!-- /page_builder/_product_features.antlers.html -->
<section class="lg:aspect-[9/4]">
    <div class="fluid-container">
        <div class="relative">
        <div class="grid lg:grid-cols-12 gap-6 overflow-hidden lg:overflow-visible">
            <figure
            x-data="{ animation: '' }"
            class="
            {{ switch(
                (last_segment == 'indoor-digital-menu-board') => 'lg:col-start-4 lg:col-span-6 -my-24 lg:my-16 xl:my-0',
                () => 'lg:col-start-3 lg:col-span-8 -mt-24 lg:-my-24',
            )}}"
            
            x-init="
                animation = lottie.loadAnimation({
                    container: $el,
                    renderer: 'svg',
                    autoplay: false,
                    loop: false,
                    path: '{{ animation }}'
                }),
                create({
                    mode: 'scroll',
                    player: animation,
                    container: '.animation-container-class',
                    actions: [
                        {
                            visibility: [0, .1],
                            type: 'seek',
                            frames: [0, 0],
                        },
                        {
                            visibility: [.1, .9],
                            type: 'seek',
                            frames: [0, {{ frames }}],
                        },
                    ],
                })
            "
            aria-hidden="true"
            >
            </figure>
    
    
            
        </div>
        <div class="xl:px-7 grid sm:grid-cols-2 lg:grid-cols-12 gap-6 lg:absolute lg:w-full lg:h-full lg:inset-0">
            {{ features }}
            <div x-data="fadeIn()" x-init="hide($el)" x-intersect.once.margin.-20%="fadeIn($el)" class="lg:w-full lg:max-w-xs lg:absolute 
                {{ switch(
                    (count == 1) => 'lg:top-0 xl:top-20',
                    (count == 2) => 'lg:top-0 xl:top-44',
                    (count == 3 && last_segment == 'indoor-digital-menu-board') => 'lg:bottom-0 xl:right-20',
                    (count == 3) => 'lg:bottom-0 xl:bottom-48',
                    (count == 4) => 'lg:bottom-0 xl:bottom-20',
                )}}

                {{ switch(
                    (feature_position == 'right') => 'lg:right-0',
                )}}

                ">
                {{ partial:typography/large class="font-medium" :content="title" }}
                {{ partial:typography/p :content="text" class="mt-3" color="text-charcoal" }}
            </div>
            {{ /features }}
        </div>
    </div>
    </div>
</section>

<!-- End: /page_builder/_product_features.antlers.html -->
